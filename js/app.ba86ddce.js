(function(t){function a(a){for(var n,o,s=a[0],c=a[1],u=a[2],l=0,f=[];l<s.length;l++)o=s[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(a);while(f.length)f.shift()();return i.push.apply(i,u||[]),e()}function e(){for(var t,a=0;a<i.length;a++){for(var e=i[a],n=!0,o=1;o<e.length;o++){var c=e[o];0!==r[c]&&(n=!1)}n&&(i.splice(a--,1),t=s(s.s=e[0]))}return t}var n={},r={app:0},i=[];function o(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-6239fe54":"982eb6e6"}[t]+".js"}function s(a){if(n[a])return n[a].exports;var e=n[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.e=function(t){var a=[],e=r[t];if(0!==e)if(e)a.push(e[2]);else{var n=new Promise((function(a,n){e=r[t]=[a,n]}));a.push(e[2]=n);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=o(t);var u=new Error;i=function(a){c.onerror=c.onload=null,clearTimeout(l);var e=r[t];if(0!==e){if(e){var n=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;u.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",u.name="ChunkLoadError",u.type=n,u.request=i,e[1](u)}r[t]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(a)},s.m=t,s.c=n,s.d=function(t,a,e){s.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,a){if(1&a&&(t=s(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var n in t)s.d(e,n,function(a){return t[a]}.bind(null,n));return e},s.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(a,"a",a),a},s.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},s.p="/VUE_CLI4_HexSchool_Shop/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=a,c=c.slice();for(var l=0;l<c.length;l++)a(c[l]);var d=u;i.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("2b0e"),r=e("2f62"),i=e("bc3a"),o=e.n(i),s=e("2106"),c=e.n(s),u=e("9062"),l=e.n(u),d=(e("e40d"),e("4989"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("nav",{staticClass:"navbar navbar-light bg-light"},[e("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[e("i",{staticClass:"fa fa-heart text-info",attrs:{"aria-hidden":"true"}}),t._v(" 六角血拼賣賣 ")]),e("div",{staticClass:"dropdown ml-auto"},[e("button",{staticClass:"btn btn-sm btn-cart",attrs:{"data-toggle":"dropdown","data-flip":"false"}},[e("i",{staticClass:"fa fa-shopping-cart text-dark fa-2x",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"badge badge-pill badge-danger"},[t._v(t._s(t.cart.carts.length))]),e("span",{staticClass:"sr-only"},[t._v("unread messages")])]),e("div",{staticClass:"dropdown-menu dropdown-menu-right p-3",staticStyle:{"min-width":"300px"},attrs:{"data-offset":"400"}},[e("h6",[t._v("已選擇商品")]),e("table",{staticClass:"table table-sm"},[e("tbody",t._l(t.cart.carts,(function(a){return t.cart.carts.length?e("tr",{key:a.id},[e("td",{staticClass:"align-middle text-center"},[e("a",{staticClass:"text-muted",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeCart(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+t._s(a.product.unit))]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(a.total))])]):t._e()})),0)]),t._m(0)])])],1),t._m(1),e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("router-view"),t._m(2)],1)}),f=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"btn btn-primary btn-block"},[e("i",{staticClass:"fa fa-cart-plus",attrs:{"aria-hidden":"true"}}),t._v(" 結帳去 ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"jumbotron jumbotron-fluid jumbotron-bg d-flex align-items-end"},[e("div",{staticClass:"container"},[e("div",{staticClass:"p-3 bg-lighter"},[e("h1",{staticClass:"display-3 font-weight-bold"},[t._v("買到剁手手！最後出清")]),e("p",{staticClass:"lead"},[t._v("This is a modified jumbotron that occupies the entire horizontal space of its parent.")])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("footer",{staticClass:"bg-light text-muted py-5"},[e("div",{staticClass:"container"},[e("ul",{staticClass:"list-inline text-center"},[e("li",{staticClass:"list-inline-item"},[t._v("© Copright 2017 六角血拼賣賣")]),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[e("i",{staticClass:"fa fa-instagram",attrs:{"aria-hidden":"true"}}),t._v(" Instagrame")])]),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[e("i",{staticClass:"fa fa-facebook-square",attrs:{"aria-hidden":"true"}}),t._v(" Facebook")])]),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[t._v("About")])])]),e("p",{staticClass:"text-center"},[t._v("Made with Bootstrap4")])])])}],p=e("5530"),m={name:"App",data:function(){return{}},methods:Object(p["a"])({removeCart:function(t){this.$store.dispatch("removeCart",t)}},Object(r["b"])(["getCart"])),computed:Object(p["a"])({},Object(r["c"])(["cart","isLoading"])),created:function(){this.getCart()}},h=m,g=(e("5c0b"),e("2877")),v=Object(g["a"])(h,d,f,!1,null,null,null),b=v.exports,C=(e("d3b7"),e("8c4f"));n["a"].use(C["a"]);var _=[{path:"/",name:"Home",component:function(){return e.e("chunk-6239fe54").then(e.bind(null,"bb51"))}}],y=new C["a"]({routes:_}),O=y;e("99af"),e("4160"),e("a630"),e("6062"),e("3ca3"),e("159b"),e("ddb0");n["a"].use(r["a"]);var x=new r["a"].Store({strict:!0,state:{isLoading:!1,products:[],categories:[],cart:{carts:[]}},actions:{updateLoading:function(t,a){t.commit("LOADING",a)},getProducts:function(t){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("CASPERPATH","/products/all");t.commit("LOADING",!0),o.a.get(a).then((function(a){t.commit("PRODUCTS",a.data.products),t.commit("CATEGORIES",a.data.products),console.log("取得產品列表:",a),t.commit("LOADING",!1)}))},getCart:function(t){t.commit("LOADING",!0);var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("CASPERPATH","/cart");o.a.get(a).then((function(a){a.data.data.carts&&t.commit("CART",a.data.data),t.commit("LOADING",!1),console.log("取得購物車",a.data.data)}))},removeCart:function(t,a){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("CASPERPATH","/cart/").concat(a);t.commit("LOADING",!0),o.a.delete(e).then((function(a){t.commit("LOADING",!1),t.dispatch("getCart"),console.log("刪除購物車項目",a)}))},addtoCart:function(t,a){var e=a.id,n=a.qty,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("CASPERPATH","/cart");t.commit("LOADING",!0);var i={product_id:e,qty:n};o.a.post(r,{data:i}).then((function(a){t.commit("LOADING",!1),t.dispatch("getCart"),console.log("加入購物車:",a)}))}},mutations:{LOADING:function(t,a){t.isLoading=a},PRODUCTS:function(t,a){t.products=a},CATEGORIES:function(t,a){var e=new Set;a.forEach((function(t){e.add(t.category)})),t.categories=Array.from(e)},CART:function(t,a){t.cart=a}},getters:{categories:function(t){return t.categories},products:function(t){return t.products},isLoading:function(t){return t.isLoading},cart:function(t){return t.cart}}});n["a"].config.productionTip=!1,n["a"].use(c.a,o.a),n["a"].component("Loading",l.a),n["a"].use(r["a"]),new n["a"]({router:O,store:x,render:function(t){return t(b)}}).$mount("#app")},"5c0b":function(t,a,e){"use strict";e("9c0c")},"9c0c":function(t,a,e){}});
//# sourceMappingURL=app.ba86ddce.js.map